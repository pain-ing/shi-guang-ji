# 拾光集 v1.0 - 对齐文档 (ALIGNMENT)

**任务名称:** shi-guang-ji-v1  
**创建日期:** 2025-09-06  
**阶段:** Phase 1 - Align  

---

## 1. 项目上下文分析

### 1.1 现有项目结构
- **项目状态:** 全新项目，仅有文档，无现有代码实现
- **项目根目录:** `d:\Mituanapp1`
- **现有文档:**
  - `产品需求文档.md` - 产品功能需求和用户画像
  - `技术架构文档.md` - 技术选型和系统架构设计
  - `实施指南文档.md` - 开发流程和代码规范
  - `项目总结文档.md` - 项目回顾模板
  - `.augment\rules\6A.md` - 6A开发方法论规则

### 1.2 技术栈分析
**推荐技术栈 (基于架构文档):**
- **前端框架:** Next.js (React) 或 Nuxt.js (Vue)
- **UI库:** Tailwind CSS + Headless UI 或 Shadcn/ui
- **后端服务:** Supabase (PostgreSQL + Auth + Storage)
- **部署平台:** Vercel (前端) + Supabase (后端)
- **开发语言:** TypeScript (严格模式)
- **包管理:** pnpm
- **移动端:** 响应式Web应用 (可选Capacitor/Tauri封装)

### 1.3 架构模式
- **架构类型:** Jamstack架构
- **数据流:** 前端 → Supabase SDK → Supabase服务
- **安全模式:** 行级安全(RLS) + 环境变量管理
- **存储策略:** Supabase Storage (私有桶 + 签名URL)

---

## 2. 需求理解确认

### 2.1 原始需求概述
构建一个名为"拾光集"的个人生活记录应用，帮助用户记录日常生活、管理个人媒体，并提供跨平台的一致体验。

### 2.2 核心功能需求 (高优先级)
1. **用户账户系统**
   - 邮箱/手机号注册登录
   - 第三方登录 (微信、Apple ID)
   - 个人资料管理 (头像、昵称、简介)

2. **每日打卡系统**
   - 一键签到功能
   - 心情标签选择
   - 一句话小记
   - 打卡日历展示

3. **日记系统**
   - 富文本编辑器 (Markdown支持)
   - 图片/视频插入
   - 自动保存草稿
   - 创建/编辑/删除日记

4. **媒体库管理**
   - 批量上传照片/视频
   - 时间线和网格视图
   - 按日期快速跳转
   - 全屏预览和EXIF信息

### 2.3 中等优先级功能
- "那年今日"智能推荐
- 标签与分类系统
- 数据导出功能

### 2.4 低优先级功能
- 日记模板
- 主题换肤

---

## 3. 边界确认

### 3.1 项目范围
**包含内容:**
- v1.0核心功能完整实现
- 响应式Web应用 (桌面端 + 移动端)
- 完整的用户认证和数据安全
- 基础的媒体管理功能
- 符合产品文档的UI/UX设计

**不包含内容:**
- 原生移动应用开发
- 社交分享功能 (v2.0规划)
- 高级搜索功能 (v2.0规划)
- 多语言国际化支持
- 复杂的数据分析功能

### 3.2 技术边界
- 使用Supabase免费层限制内的功能
- 不涉及自定义后端服务开发
- 不包含复杂的AI/ML功能
- 遵循现代Web标准和最佳实践

---

## 4. 疑问澄清

### 4.1 技术选型决策点
1. **前端框架选择:** Next.js vs Nuxt.js
   - 推荐: Next.js (更好的Vercel集成，更丰富的生态)

2. **UI库选择:** Tailwind + Headless UI vs Shadcn/ui
   - 推荐: Shadcn/ui (更现代的组件库，更好的TypeScript支持)

3. **富文本编辑器:** TipTap vs Milkdown
   - 推荐: TipTap (更成熟，更好的React集成)

4. **移动端策略:** 纯响应式 vs Capacitor封装
   - 推荐: 纯响应式Web应用 (v1.0阶段)

### 4.2 功能实现细节
1. **第三方登录:** 是否需要微信登录？
   - 建议: v1.0先实现邮箱登录，第三方登录作为后续迭代

2. **文件上传限制:** 单文件大小和总存储限制？
   - 建议: 单文件50MB，用户总存储1GB (Supabase免费层)

3. **数据导出格式:** JSON vs Markdown vs 其他？
   - 建议: 支持JSON和Markdown两种格式

---

## 5. 非功能性需求确认

### 5.1 性能要求
- 应用启动时间 < 2秒
- 列表滚动流畅无卡顿
- 图片加载优化 (懒加载、压缩)

### 5.2 兼容性要求
- **桌面端:** Chrome, Safari, Firefox, Edge (近2年版本)
- **移动端:** iOS Safari, Chrome Mobile (近3年版本)

### 5.3 安全要求
- 用户数据传输加密 (HTTPS)
- 数据库行级安全 (RLS)
- 敏感信息环境变量管理
- 文件访问权限控制

---

## 6. 验收标准预览

### 6.1 功能验收
- [ ] 用户可以成功注册、登录、登出
- [ ] 用户可以完成每日打卡并查看历史记录
- [ ] 用户可以创建、编辑、删除日记
- [ ] 用户可以上传、浏览、管理媒体文件
- [ ] 应用在桌面端和移动端都有良好体验

### 6.2 技术验收
- [ ] 代码遵循TypeScript严格模式
- [ ] 所有数据表启用RLS策略
- [ ] 应用可以成功部署到Vercel
- [ ] 所有环境变量正确配置
- [ ] 基本的单元测试覆盖

---

## 7. 下一步行动

1. 基于此对齐文档创建共识文档 (CONSENSUS)
2. 确认所有技术选型决策
3. 进入架构设计阶段 (Phase 2: Architect)
